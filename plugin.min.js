var editor_width = 500;
if($(window).width() < 500){
	editor_width = $(window).width()-100
}
tinymce.PluginManager.add('math_editor', function(editor, url) {
	editor = editor
    editor.addButton('math_editor',
        {
        	title       : 'MathQuill Based Editor',
	        image       : url + '/img/math.png',
	        onclick     : function() {
				editor.windowManager.open({
			   		title: "Math Editor",
					url: url+'/index.html',
					width: editor_width,
					height: 400
				});
			}
	});

	editor.on('DblClick', function(ed, e) {
         element = $(ed.target);
         if(!element.hasClass('matheditor-formula')){ return; }
         latex_n = element.data('latex')
         editor.selection.collapse();
         editor.windowManager.open({
            title: "Math Editor",
            url: url+'/index.html',
            width: editor_width,
            height: 400
        });
        editor.windowManager.setParams({prefill_latex: latex_n}); 
      });
});


